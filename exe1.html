<html>
    <head>
        <title>exe1</title>
    </head>
    <body>
        <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

        <a-scene shadow="type: pcfsoft">
            <a-light type="directional"
                position="5 5 5"
                intensity="1"
                light="castShadow: true"
                shadow-camera-left="-15"
                shadow-camera-right="15"
                shadow-camera-top="15"
                shadow-camera-bottom="-15"
                shadow-map-width="2048"
                shadow-map-height="2048"
                shadow-bias="-0.0001">
            </a-light>
            <a-box position="-5 2 -3" rotation="0 45 0" color="#4CC3D9"
                   shadow="cast: true; receive: true"></a-box>
            <a-sphere position="0 2 -5" radius="1.25" color="#EF2D5E"
                      shadow="cast: true; receive: true"></a-sphere>
            <a-cylinder position="4 2 7" radius="0.5" height="1.5" color="#FFC65D"
                        shadow="cast: true; receive: true"></a-cylinder>
            <a-plane rotation="-90 0 0" width="20" height="20" color="#7BC8A4"
                     shadow="receive: true"></a-plane>
            <a-entity id="rig" position="0 1 0">
                <a-camera wasd-controls look-controls></a-camera>
            </a-entity>
            <a-entity oculus-touch-controls="hand: left""></a-entity>
            <a-entity oculus-touch-controls="hand: right"></a-entity>
        </a-scene>
    </body>
    <script>
        const rig = document.getElementById('rig');

        document.querySelectorAll('[oculus-touch-controls]').forEach(controller => {
            controller.addEventListener('thumbstickmoved', (evt) => {
                const hand = controller.getAttribute('oculus-touch-controls').hand;
                const x = evt.detail.x; // axe horizontal
                const y = evt.detail.y; // axe vertical
                const speed = 0.05;
                const rotSpeed = 1.5;

                if (hand === 'left') {
                    // d√©placement
                    const forward = -y;
                    const strafe = x;
                    const angle = rig.getAttribute('rotation').y * Math.PI / 180;
                    const dx = Math.sin(angle) * forward + Math.cos(angle) * strafe;
                    const dz = Math.cos(angle) * forward - Math.sin(angle) * strafe;
                    const pos = rig.getAttribute('position');
                    rig.setAttribute('position', {
                        x: pos.x + dx * speed,
                        y: pos.y,
                        z: pos.z + dz * speed
                    });
                }

                if (hand === 'right') {
                    // rotation
                    const rot = rig.getAttribute('rotation');
                    rig.setAttribute('rotation', {
                        x: rot.x,
                        y: rot.y - x * rotSpeed,
                        z: rot.z
                    });
                }
            });
        });
    </script>

</html> 